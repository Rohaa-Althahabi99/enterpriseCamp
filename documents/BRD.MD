# وثيقة متطلبات العمل (BRD) - نظام إدارة الطلبات الديناميكية

## 1. مقدمة

### 1.1 الغرض من الوثيقة
تهدف هذه الوثيقة إلى تحديد متطلبات العمل والوظيفية لنظام "إدارة الطلبات الديناميكية". سيسمح هذا النظام للمستخدمين بتقديم طلبات بناءً على أنواع مختلفة من المستخدمين (مثل طالب، وكيل، موظف)، بينما يوفر لوحة تحكم للمدير لإدارة هذه الأنواع من المستخدمين والحقول المرتبطة بها والطلبات المقدمة.

### 1.2 نطاق المشروع
يشمل المشروع تطوير المكونات التالية:
- **واجهة أمامية (Frontend):** واجهة ويب للمستخدمين لتقديم الطلبات، وواجهة أخرى للمدير لإدارة النظام.
- **واجهة خلفية (Backend):** واجهة برمجة تطبيقات (API) لمعالجة منطق العمل والتفاعل مع قاعدة البيانات.
- **قاعدة بيانات (Database):** لتخزين جميع البيانات المتعلقة بأنواع المستخدمين، الحقول، والطلبات.

## 2. وصف النظام

### 2.1 نظرة عامة
النظام مصمم ليكون مرنًا وقابلاً للتخصيص. الفكرة الأساسية هي تمكين المدير من تعريف "أنواع المستخدمين" المختلفة وتحديد الحقول المطلوبة لكل نوع. عندما يقوم مستخدم بتقديم طلب جديد، يختار أولاً نوع المستخدم، ثم يعرض له النظام النماذج والحقول المخصصة لهذا النوع.

### 2.2 الأدوار الرئيسية
- **المستخدم (User):** أي شخص يرغب في تقديم طلب عبر النظام.
- **المدير (Admin):** المسؤول عن إدارة النظام، بما في ذلك إنشاء وتعديل أنواع المستخدمين، ومراجعة الطلبات واتخاذ إجراء بشأنها.

## 3. المتطلبات الوظيفية

### 3.1 تدفق عمل المستخدم (إنشاء طلب)
1.  **عرض أنواع المستخدمين:** عند فتح صفحة إنشاء الطلب، يجب على النظام عرض قائمة منسدلة تحتوي على جميع "أنواع المستخدمين" النشطة المتاحة.
2.  **عرض الحقول الديناميكية:** بناءً على نوع المستخدم الذي تم اختياره، يجب على النظام عرض الحقول المخصصة لهذا النوع ديناميكيًا.
3.  **تعبئة وتقديم الطلب:** يقوم المستخدم بملء الحقول المطلوبة وتقديم النموذج.
4.  **حفظ الطلب:** يقوم النظام بحفظ بيانات الطلب في قاعدة البيانات مع حالة "قيد المراجعة" (Pending).
5.  **رسالة تأكيد:** يتلقى المستخدم رسالة تأكيد فورية على الشاشة تفيد بنجاح تقديم الطلب.
6.  **إشعار بحالة الطلب:** يجب أن يتلقى المستخدم إشعارًا (عبر البريد الإلكتروني وواتساب) عند تغيير حالة طلبه (مقبول أو مرفوض).

### 3.2 تدفق عمل المدير (إدارة النظام)
1.  **تسجيل الدخول:** يجب أن يكون للمدير صفحة تسجيل دخول آمنة للوصول إلى لوحة التحكم.
2.  **إدارة أنواع المستخدمين:**
    - **إنشاء نوع مستخدم جديد:** يمكن للمدير إنشاء نوع مستخدم جديد (مثل "طالب"). عند الإنشاء، يحدد المدير اسم النوع ويختار الحقول المرتبطة به من قائمة حقول رئيسية متاحة.
    - **تعديل نوع مستخدم:** يمكن للمدير تعديل أنواع المستخدمين الحالية (مثل إضافة أو إزالة حقول).
    - **حذف نوع مستخدم:** يمكن للمدير حذف نوع مستخدم.
3.  **إدارة الطلبات:**
    - **عرض الطلبات:** تعرض لوحة التحكم جميع الطلبات المقدمة مع حالتها.
    - **مراجعة الطلب:** يمكن للمدير عرض تفاصيل أي طلب.
    - **الموافقة على الطلب (Approve):** إذا تمت الموافقة على الطلب، يقوم النظام بتغيير حالة الطلب إلى "مقبول".
    - **رفض الطلب (Reject):** إذا تم رفض الطلب، يقوم النظام بتغيير حالة الطلب إلى "مرفوض" مع إمكانية إضافة ملاحظات حول سبب الرفض.

## 4. متطلبات غير وظيفية

- **الأداء:** يجب أن يكون النظام سريع الاستجابة، خاصة عند عرض الحقول الديناميكية.
- **الأمان:** يجب تأمين واجهات برمجة التطبيقات (APIs) الخاصة بالمدير بشكل صحيح.
- **قابلية التوسع:** يجب تصميم بنية قاعدة البيانات لتكون مرنة وقادرة على التعامل مع أنواع وحقول متعددة دون الحاجة إلى تغييرات هيكلية كبيرة.

### 4.1 محدوديات واعتبارات
- **خدمة البريد الإلكتروني:** سيتم استخدام مزود خدمة بريد إلكتروني مجاني (مثل Gmail) مع كلمة مرور للتطبيقات. هذا الحل له محدودية تتمثل في عدد معين من الرسائل يوميًا (حوالي 100 بريد إلكتروني).
- **خدمة واتساب:** سيتم الاعتماد على حل غير رسمي (Scraping) لإرسال الإشعارات عبر واتساب. هذا الحل مجاني ولكنه يحمل مخاطر، مثل احتمالية حظر الرقم إذا تم استخدامه بشكل مكثف يشبه سلوك الروبوتات (Bots).

### 4.2 متطلبات الاستضافة والتكاليف
- **الاستضافة (Hosting):** سيتم استئجار خادم افتراضي خاص (VPS) من Hostinger بالخطة الأساسية، بتكلفة تقريبية 30 دولارًا شهريًا.
- **اسم النطاق (Domain Name):** سيتم استئجار اسم نطاق، بتكلفة تقريبية 30 دولارًا سنويًا. تعتمد التكلفة الفعلية على الاسم المختار.

## 5. بنية قاعدة البيانات المقترحة

لتحقيق المرونة، نقترح استخدام بنية تعتمد على الجداول التالية:

1.  `fields_master`: جدول رئيسي يحتوي على جميع الحقول الممكنة التي يمكن استخدامها في أي نموذج (مثل: الاسم، البريد الإلكتروني، الرقم الجامعي).
2.  `user_types`: جدول لتخزين أنواع المستخدمين التي يقوم المدير بإنشائها (مثل: طالب، وكيل).
3.  `user_type_fields`: جدول وسيط يربط بين `user_types` و `fields_master` لتحديد الحقول المطلوبة لكل نوع مستخدم.
4.  `requests`: جدول لتخزين جميع الطلبات المقدمة. سيتم تخزين بيانات النموذج المدخلة من قبل المستخدم في حقل من نوع `JSONB` لضمان المرونة.

هذه البنية تلغي الحاجة إلى إنشاء جداول ديناميكية لكل نوع مستخدم، مما يبسط الإدارة ويحسن الأداء.

## 6. الجدول الزمني والتكلفة

- **المهلة الزمنية:** من تاريخ اعتماد هذه الوثيقة (BRD)، مدة تنفيذ المشروع المتوقعة هي 20 يوم عمل.
- **تكلفة المشروع:** التكلفة الإجمالية المقترحة للمشروع حسب متطلبات هذه الوثيقة هي 1700 دولار أمريكي.
- **ملاحظات:** يمكن أن تتغير التكلفة والمدة إذا تم إضافة متطلبات جديدة أو تغير نطاق العمل؛ سيتم الاتفاق على أي تغييرات قبل تنفيذها.

